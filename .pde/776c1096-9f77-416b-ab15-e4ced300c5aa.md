# Prompt Decomposition

## Directions

- ğŸŒ… **EAST** â€” VISION: What is being asked?
- ğŸ”¥ **SOUTH** â€” ANALYSIS: What needs to be learned?
- ğŸŒŠ **WEST** â€” VALIDATION: What needs reflection?
- â„ï¸ **NORTH** â€” ACTION: What executes the cycle?

## Original Prompt

> Evolve the mia-code-server RISE Framework rispecs by integrating key concepts from the GitHub Copilot Workspace platform specification. The Copilot Workspace had a Taskâ†’Specâ†’Planâ†’Code pipeline with steerable AI at every stage, workspace session management, repository indexing, and PR creation workflow. The existing rispecs have 62 specs across 8 categories (mia-server-core, miaco-module, three-universe, agentic-ide, narrative-intelligence, mia-vscode, codevops-platform, pde-engine).
> 
> Key evolution areas:
> 1. Create new rispecs that capture the Workspace Lifecycle concept (ideaâ†’specâ†’planâ†’codeâ†’PR as a first-class entity), recognizing that CW's "Current State vs Proposed State" specification IS essentially RISE's Structural Tension Chart made interactive and steerable
> 2. Evolve the PDE engine specs to include steerable decomposition where users can edit/regenerate at any phase
> 3. Enhance the codevops-platform specs with a Specâ†’Planâ†’Code pipeline that integrates with the existing workflow engine and narrative system
> 4. After creating/evolving rispecs, choose the most valuable core implementation for a proof-of-concept and build it as a working TypeScript module within mia-code-server
> 
> The POC should be a Workspace Lifecycle Engine that:
> - Manages workspace sessions (create, list, resume, complete)
> - Implements the Taskâ†’Specâ†’Planâ†’Code phases as narrative arcs
> - Integrates with STC charts (Current Reality = Current State, Desired Outcome = Proposed State)
> - Provides HTTP API endpoints for each phase
> - Is testable with unit tests
> - Runs within the mia-code-server Node.js infrastructure

## Primary Intent

**Action:** evolve
**Target:** mia-code-server RISE Framework rispecs by integrating Copilot Workspace concepts and building a Workspace Lifecycle Engine POC
**Urgency:** session
**Confidence:** 95%

## Secondary Intents

1. **create** â€” new rispecs capturing Workspace Lifecycle concept (ideaâ†’specâ†’planâ†’codeâ†’PR) _(explicit)_
2. **recognize** â€” CW's Current State vs Proposed State as RISE's Structural Tension Chart made interactive _(explicit)_
3. **evolve** â€” PDE engine specs to include steerable decomposition with user editing at any phase _(explicit)_
   - depends on: create new workspace lifecycle rispecs
4. **enhance** â€” codevops-platform specs with Specâ†’Planâ†’Code pipeline integrated with workflow engine _(explicit)_
   - depends on: create new workspace lifecycle rispecs
5. **build** â€” Workspace Lifecycle Engine POC as working TypeScript module _(explicit)_
   - depends on: evolve rispecs
6. **implement** â€” workspace session management (create, list, resume, complete) _(explicit)_
   - depends on: build POC
7. **implement** â€” Taskâ†’Specâ†’Planâ†’Code phases as narrative arcs _(explicit)_
   - depends on: workspace session management
8. **integrate** â€” STC charts with workspace phases (Current Reality = Current State, Desired Outcome = Proposed State) _(explicit)_
   - depends on: Taskâ†’Specâ†’Planâ†’Code phases
9. **create** â€” HTTP API endpoints for each workspace phase _(explicit)_
   - depends on: workspace lifecycle phases
10. **write** â€” unit tests for the workspace lifecycle engine _(explicit)_
   - depends on: HTTP API endpoints
11. **ensure** â€” POC runs within mia-code-server Node.js infrastructure _(implicit)_
   - depends on: build POC

## Context Requirements

### Files Needed
- rispecs/codevops-platform/*.spec.md
- rispecs/pde-engine/*.spec.md
- rispecs/mia-server-core/*.spec.md
- rispecs/miaco-module/04-stc-charts.spec.md
- rispecs/README.md
- /a/src/IAIP/prototypes/artefacts/MiAICo-251203-CopilotWorkspace-N0v2akS7SXyFCRiSpAxDNQ/copilot-workspace-specs.md
- src/node/routes/index.ts
- package.json
- tsconfig.json

### Tools Required
- file-create
- file-edit
- typescript-compiler
- test-runner
- git

### Assumptions
- CW's Current State vs Proposed State specification IS RISE's Structural Tension Chart made interactive
- The existing 62 rispecs provide sufficient foundation for evolution
- mia-code-server Node.js infrastructure can host new modules
- TypeScript is the implementation language
- The POC should be self-contained enough to demonstrate the core workflow

## Four Directions Analysis

### ğŸŒ… EAST â€” VISION

- Recognize CW's Spec generation as interactive STC â€” unifying two conceptual frameworks [95%]
- Vision: Workspace Lifecycle as first-class entity spanning idea to PR [95%]
- Vision: Steerable AI at every phase of the development lifecycle [90%]

### ğŸ”¥ SOUTH â€” ANALYSIS

- Analyze existing 62 rispecs for evolution opportunities [90%]
- Study CW data models (Workspace, Task, Spec, Plan, Implementation interfaces) [85%]
- Understand how STC charts map to CW's Current/Proposed state pattern [90%]

### ğŸŒŠ WEST â€” VALIDATION

- Write unit tests for workspace lifecycle engine [90%]
- Validate POC runs within Node.js infrastructure [85%] _(implicit)_
- Review evolved rispecs for consistency with RISE framework [80%] _(implicit)_

### â„ï¸ NORTH â€” ACTION

- Create 4 new rispecs (workspace-lifecycle, spec-plan-code-pipeline, steerable-decomposition, workspace-api) [95%]
- Build Workspace Lifecycle Engine TypeScript module [95%]
- Implement HTTP API endpoints for workspace phases [90%]
- Implement STC chart integration bridge [85%]

## Action Stack

- [ ] Analyze existing rispecs and CW specs for evolution mapping
- [ ] Create rispecs/codevops-platform/07-workspace-lifecycle.spec.md â€” Workspace as first-class entity with Taskâ†’Specâ†’Planâ†’Codeâ†’PR phases
- [ ] Create rispecs/codevops-platform/08-spec-plan-code-pipeline.spec.md â€” Pipeline engine integrating with workflow engine (depends on: workspace-lifecycle spec)
- [ ] Create rispecs/pde-engine/05-steerable-decomposition.spec.md â€” User-editable decomposition with regeneration at any phase
- [ ] Create rispecs/mia-server-core/11-workspace-api.spec.md â€” REST API endpoints for workspace CRUD (depends on: workspace-lifecycle spec)
- [ ] Update rispecs/README.md with new spec entries (depends on: all new rispecs created)
- [ ] Design TypeScript types for Workspace, Phase, STC-bridge interfaces (depends on: rispecs complete)
- [ ] Implement WorkspaceStore â€” filesystem-based workspace persistence (depends on: types designed)
- [ ] Implement WorkspaceLifecycleEngine â€” phase transitions, STC integration, narrative arc tracking (depends on: store implemented)
- [ ] Implement STC Bridge â€” maps workspace phases to structural tension charts (depends on: engine implemented)
- [ ] Implement HTTP routes â€” REST endpoints for workspace operations (depends on: engine implemented)
- [ ] Write unit tests for store, engine, and routes (depends on: routes implemented)
- [ ] Run tests and validate POC works within mia-code-server infrastructure (depends on: tests written)

## Ambiguity Flags

- **"Whether the POC should actually call an LLM for spec/plan/code generation or use stub/mock generation"**
  - Suggestion: Start with structured data management and mock AI generation â€” real LLM integration is a separate concern
- **"How deeply the STC integration should go â€” simple mapping or full chart lifecycle management"**
  - Suggestion: Implement the conceptual bridge (workspace phase â†” STC chart) with simple chart creation, defer full lifecycle
- **"Whether HTTP routes should be mounted in the existing code-server Express app or run standalone"**
  - Suggestion: Design as Express Router that CAN be mounted but is also testable standalone

## Expected Outputs

### Artifacts
- rispecs/codevops-platform/07-workspace-lifecycle.spec.md
- rispecs/codevops-platform/08-spec-plan-code-pipeline.spec.md
- rispecs/pde-engine/05-steerable-decomposition.spec.md
- rispecs/mia-server-core/11-workspace-api.spec.md
- src/node/mia/workspace-lifecycle/types.ts
- src/node/mia/workspace-lifecycle/engine.ts
- src/node/mia/workspace-lifecycle/store.ts
- src/node/mia/workspace-lifecycle/routes.ts
- src/node/mia/workspace-lifecycle/stc-bridge.ts
- src/node/mia/workspace-lifecycle/index.ts
- test/unit/mia/workspace-lifecycle/engine.test.ts
- test/unit/mia/workspace-lifecycle/store.test.ts
- test/unit/mia/workspace-lifecycle/routes.test.ts

### Updates
- rispecs/README.md
