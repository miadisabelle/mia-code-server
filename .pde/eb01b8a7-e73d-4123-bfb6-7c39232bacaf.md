# Prompt Decomposition

## Directions

- üåÖ **EAST** ‚Äî VISION: What is being asked?
- üî• **SOUTH** ‚Äî ANALYSIS: What needs to be learned?
- üåä **WEST** ‚Äî VALIDATION: What needs reflection?
- ‚ùÑÔ∏è **NORTH** ‚Äî ACTION: What executes the cycle?

## Original Prompt

> ## Context: mia-code-server smcraft Integration ‚Äî Preparing the Platform Side
>
> mia-code-server (miadisabelle/mia-code-server) is a narrative-driven CoDevOps IDE platform with 66 existing RISE rispecs covering server core, miaco module, three-universe processing, agentic IDE, narrative intelligence, VS Code customization, codevops platform (including workspace lifecycle with Germination‚ÜíAssimilation‚ÜíCompletion phases), and PDE engine.
>
> Another agent is simultaneously building RISE rispecs and implementations in smcraft (jgwill/smcraft) at /b/trading/smcraft ‚Äî covering SMDF format, runtime, code generator, MCP server (11 tools), and web designer with MMOT composite state drill-down. See /b/trading/.pde/1799837b-4411-4a0f-94c6-c99b58cf8bf4.md for the full decomposition.
>
> ### This agent's job: Prepare mia-code-server to integrate smcraft
>
> 1. **New rispecs needed in mia-code-server** for smcraft integration
> 2. **KINSHIP.md updates**
> 3. **Submodule consideration**
> 4. **Cross-reference existing specs**

## Primary Intent

**Action:** prepare
**Target:** mia-code-server platform for smcraft state machine integration ‚Äî new rispecs, KINSHIP updates, submodule setup
**Urgency:** session
**Confidence:** 95%

## Secondary Intents

1. **create** ‚Äî rispec for State Machine Driven Creative Process ‚Äî mapping Germination‚ÜíAssimilation‚ÜíCompletion as smcraft hierarchical state machine with sub-states per phase _(explicit)_
2. **create** ‚Äî rispec for smcraft MCP Bridge ‚Äî proxying/invoking smcraft's 11 MCP tools from mia-code-server's /api/mcp endpoint _(explicit)_
3. **create** ‚Äî rispec for Visual State Machine Designer Integration ‚Äî embedding smcraft web designer as VS Code webview panel _(explicit)_
4. **update** ‚Äî rispecs/KINSHIP.md ‚Äî declare smcraft as core integration, document structural tension ‚Üí state transitions bridge, map workspace lifecycle phases to SMDF _(explicit)_
   - depends on: create rispecs

* Also the @llms/llms-kinship.... is something new that we are trying todo with all of you, the goal with that is achieving
* I saved you `/workspace/repos/miadisabelle/mia-code-server/.pde/LTR-Michael_G_Sherbert_s__work--134e4664-b656-464b-94cd-6c24b249c36b--260225.md` which might help you understand where we are going with this, this is new and all the rispecs might need consideration of that.  I might have spoken of the upgraded `/workspace/repos/miadisabelle/mia-code-server/llms/docs` submodule you have access


5. **evaluate** ‚Äî jgwill/smcraft as git submodule ‚Äî ship TypeScript runtime and web designer built-in _(explicit)_
6. **cross-reference** ‚Äî existing specs (workspace-lifecycle, workflow-engine, steerable-decomposition, mcp-server-integration) to ensure new rispecs integrate cleanly _(implicit)_
   - depends on: create rispecs
7. **coordinate** ‚Äî with smcraft agent to ensure smcraft rispecs (70-74) reference mia-code-server integration points _(implicit)_
   - depends on: create rispecs

## Context Requirements

### Files Needed
- rispecs/KINSHIP.md
- rispecs/README.md
- rispecs/codevops-platform/07-workspace-lifecycle.spec.md
- rispecs/codevops-platform/02-workflow-engine.spec.md
- rispecs/mia-server-core/09-mcp-server-integration.spec.md
- rispecs/pde-engine/05-steerable-decomposition.spec.md
- rispecs/agentic-ide/01-agent-panel.spec.md
- /b/trading/.pde/1799837b-4411-4a0f-94c6-c99b58cf8bf4.md
- /b/trading/smcraft/KINSHIP.md
- /b/trading/smcraft/MMOT.md
- llms/llms-rise-framework.txt

### Tools Required
- file editor
- git
- mcp-pde

### Assumptions
- The 66 existing rispecs in mia-code-server are stable and will not change during this session
- The smcraft agent is building rispecs 70-74 simultaneously and they will be available for cross-reference
- smcraft's TypeScript package is consumable as a dependency
- The RISE framework spec format from llms-rise-framework.txt should be followed for new rispecs
- New rispecs should go into a new subdirectory under rispecs/ (likely rispecs/smcraft-integration/)

## Four Directions Analysis

### üåÖ EAST ‚Äî VISION

- Vision: smcraft as the state machine engine powering mia-code-server's creative process lifecycle ‚Äî every workspace session IS a state machine [95%]
- Vision: structural tension ‚Üí state transitions as natural conceptual mapping ‚Äî tension between current reality and desired outcome drives state machine progression [92%]
- Vision: IDE with embedded state machine designer for visualizing and editing creative process workflows [85%] _(implicit)_

### üî• SOUTH ‚Äî ANALYSIS

- Analyze existing 66 rispecs for integration points with smcraft ‚Äî identify which specs need awareness of state machine concepts [90%] _(implicit)_
- Study smcraft's SMDF format and map it to workspace lifecycle WorkspaceEntity/WorkspacePhase types [92%]
- Analyze smcraft MCP tools (11 tools) to determine proxy strategy from mia-code-server endpoint [88%]
- Evaluate submodule vs npm dependency approach for smcraft TypeScript consumption [75%]

### üåä WEST ‚Äî VALIDATION

- Validate that new rispecs follow RISE framework format from llms-rise-framework.txt [90%] _(implicit)_
- Validate that the conceptual bridge (structural tension ‚Üî state transitions) is sound and not a forced metaphor [85%] _(implicit)_
- Review consistency between new smcraft-integration specs and existing codevops-platform/workspace-lifecycle spec [88%]

### ‚ùÑÔ∏è NORTH ‚Äî ACTION

- Create 3 new rispecs in rispecs/smcraft-integration/ [95%]
- Update KINSHIP.md with formal smcraft integration declaration [95%]
- Update README.md specification index with new smcraft-integration section [90%] _(implicit)_
- Git add and commit all new/updated files [95%] _(implicit)_

## Action Stack

- [x] Read and internalize RISE framework format from llms-rise-framework.txt
- [x] Read all existing rispecs directories and KINSHIP.md to understand current spec landscape
- [x] Read smcraft PDE decomposition and MMOT.md to understand what the other agent is building
- [ ] Create rispecs/smcraft-integration/ directory
- [ ] Create 01-state-machine-creative-process.spec.md ‚Äî map Germination‚ÜíAssimilation‚ÜíCompletion as hierarchical state machine with sub-states, events, guards, and actions (depends on: Create directory)
- [ ] Create 02-smcraft-mcp-bridge.spec.md ‚Äî MCP tool proxying strategy, authentication pass-through, tool registry synchronization (depends on: Create directory)
- [ ] Create 03-visual-designer-integration.spec.md ‚Äî webview panel embedding, state machine visualization within IDE, bidirectional sync with workspace lifecycle (depends on: Create directory)
- [ ] Update rispecs/KINSHIP.md ‚Äî add smcraft as core integration, document structural tension ‚Üí state transitions bridge (depends on: Create rispecs)
- [ ] Update rispecs/README.md ‚Äî add smcraft-integration section to specification index (depends on: Create rispecs)
- [ ] Validate all new specs against RISE framework compliance (depends on: Create rispecs)

## Ambiguity Flags

- **"New rispecs directory naming ‚Äî 'smcraft-integration' vs a different convention"**
  - Suggestion: Use 'smcraft-integration/' to match the pattern of other subdirectories (mia-server-core, codevops-platform, etc.)
- **"Submodule path ‚Äî ./smcraft/ vs ./lib/smcraft/ vs npm dependency"**
  - Suggestion: Evaluate both; submodule gives source access for web designer embedding, npm gives cleaner dependency management. Recommend submodule for now given active development.
- **"How many smcraft MCP tools to expose vs which to keep internal"**
  - Suggestion: Expose all 11 through the bridge initially, gate with permissions later

## Expected Outputs

### Artifacts
- rispecs/smcraft-integration/01-state-machine-creative-process.spec.md
- rispecs/smcraft-integration/02-smcraft-mcp-bridge.spec.md
- rispecs/smcraft-integration/03-visual-designer-integration.spec.md

### Updates
- rispecs/KINSHIP.md
- rispecs/README.md

### Communications
- Cross-repo coordination notes in /b/trading/.pde/1799837b-4411-4a0f-94c6-c99b58cf8bf4.md
